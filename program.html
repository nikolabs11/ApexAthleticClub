<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program - Apex Athletic Club</title>
    <link rel="stylesheet" href="program.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.cells.min.js"></script>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("orACw4cPmMD066o2G");
        })();
    </script>
    <style>
        #program-type-selection {
            padding-top: 10px;
        }
        #program-type-selection .program-description {
            margin-top: 0;
        }
        #program-type-selection h3 {
            margin-top: 10px;
        }
        .program-type-button {
            display: block;
            width: 80%;
            margin: 10px auto;
            padding: 15px;
            font-size: 18px;
            color: white;
            background-color: #045034;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .program-type-button:hover {
            background-color: #109963;
        }
        .zelle-pay-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #6d1ed4;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 16px;
            transition: background-color 0.3s ease;
        }
        .zelle-pay-button:hover {
            background-color: #5718a8;
        }
    </style>
</head>
<body>
    <div id="vanta-bg"></div>
    <div id="overlay">
        <div id="logo-container">
            <a href="/">
                <img id="club-logo" src="images/AAC Logo.png" alt="Apex Athletic Club Logo">
            </a>
        </div>

        <!-- Welcome section on dark background -->
        <div id="welcome-section">
            <h2>Welcome to Apex Athletic Club</h2>
            <h4>A Talent Factory for Promising Individuals</h4>
            <button id="build-program" class="cta-button">BUILD A SPORTS PROGRAM</button>
        </div>
    </div>

    <!-- NEW: Program Type Selection Section -->
    <div class="program-content" id="program-type-selection">
        <div class="program-description">
            <h3>About Us</h3>
            <p>Our coaches are full-time professionals that utilize best practices from the top youth academies around the world. We offer 12 months of programming across multiple sports with the primary focus on soccer.</p>
            
            <p>Training and development within our Raptors Academy is guaranteed but placement on official Raptors teams is not. Playing on official Raptors teams is dependent on development, attendance, and performances in games. Regardless, we will have teams and games for all Apex Athletic Club players.</p>
        </div>

        <h3>Choose Your Program Type</h3>
        <p>Please select your preferred training option:</p>
        <button id="btn-full-program" class="program-type-button">Full Program (Raptors Teams)</button>
        <button id="btn-small-group" class="program-type-button">Small Group Sessions Only</button>
    </div>

    <!-- Program selection section (for Full Program) -->
    <div class="program-content" id="program-selection" style="display: none;">
        <div class="sport-selection">
            <!-- Indoor Soccer -->
            <div class="sport-option">
                <div class="sport-header">
                    <input type="checkbox" id="indoor-soccer" name="programs" value="Indoor Soccer" checked disabled>
                    <span class="sport-title">Indoor Soccer/Futsal (Required)</span>
                </div>
                <div class="sport-details">
                    <div class="text-content">
                        <div class="timeline"><strong>October - February and May - August</strong></div>
                        <div class="age-group"><strong>2014s and younger</strong></div>
                        <div class="schedule"><strong>Tuesday and Saturday</strong></div>
                        <ul>
                            <li>Professional, licensed coaches</li>
                            <li>Focus on technical skills and fast-paced decision making</li>
                            <li>Small-sided games and futsal tournaments</li>
                            <li>Perfect for developing close control and creativity</li>
                        </ul>
                        <div class="location"><strong>Location: <a href="https://goo.gl/maps/h2VgMBNPgP9RmvJR6" target="_blank">XL Sports World Apex</a></strong></div>
                    </div>
                    <div class="image-container">
                        <img src="images/XLSWAPEX.png" alt="Indoor Soccer">
                        <img src="images/USFUTSAL.png" alt="US Futsal">
                    </div>
                </div>
            </div>

            <!-- Outdoor Soccer -->
            <div class="sport-option">
                <div class="sport-header">
                    <input type="checkbox" id="outdoor-soccer" name="programs" value="Outdoor Soccer" checked disabled>
                    <span class="sport-title">Outdoor Soccer (Required)</span>
                </div>
                <div class="sport-details">
                    <div class="text-content">
                        <div class="timeline"><strong>March - May and August - October</strong></div>
                        <div class="age-group"><strong>2014s and younger</strong></div>
                        <div class="schedule"><strong>Tuesdays and Saturdays</strong></div>
                        <ul>
                            <li>Professional, licensed coaches</li>
                            <li>Emphasis on tactical understanding and game intelligence</li>
                            <li>Competitive matches through US Club Soccer</li>
                            <li>Position-specific training</li>
                            <li>Focus on building complete players</li>
                        </ul>
                        <div class="location"><strong>Location: <a href="https://maps.app.goo.gl/Ld5YPTFVKGBxKGqb7" target="_blank">Piney Wood Park</a></strong></div>
                    </div>
                    <div class="image-container">
                        <img src="images/CPR.png" alt="Cary Parks">
                        <img src="images/DPR.png" alt="Durham Parks">
                        <img src="images/USCLUBSOCCER.webp" alt="US Club Soccer">
                    </div>
                </div>
            </div>

            <!-- Small Group Training (required for full program) -->
            <div class="sport-option">
                <div class="sport-header">
                    <input type="checkbox" id="small-group" name="programs" value="Small Group Training" checked disabled>
                    <span class="sport-title">Small Group Training (Required)</span>
                </div>
                <div class="sport-details">
                    <div class="text-content">
                        <div class="timeline"><strong>Year-round</strong></div>
                        <div class="age-group"><strong>2010s and younger</strong></div>
                        <div class="schedule"><strong>Flexible scheduling</strong></div>
                        <ul>
                            <li>Professional, licensed coaches</li>
                            <li>Maximum 4 players per coach</li>
                            <li>Personalized attention and feedback</li>
                            <li>Focused skill development</li>
                            <li>Custom training plans based on player needs</li>
                        </ul>
                        <div class="location"><strong>Location: <a href="https://www.google.com/maps/search/?api=1&query=1250+Ambergate+Station,+Apex,+NC+27502" target="_blank">Hunter Street Park</a>, <a href="https://www.google.com/maps/search/?api=1&query=2600+Evans+Rd,+Apex,+NC+27502" target="_blank">Apex Nature Park</a>, or <a href="https://www.google.com/maps/search/?api=1&query=1016+Investment+Blvd" target="_blank">XLSW Apex</a></strong></div>
                    </div>
                    <div class="image-container">
                        <img src="images/XLSWAPEX.png" alt="XLSW Apex">
                    </div>
                </div>
            </div>

            <!-- Judo -->
            <div class="sport-option">
                <div class="sport-header" onclick="document.getElementById('judo').click()">
                    <input type="checkbox" id="judo" name="programs" value="Judo">
                    <span class="sport-title">Judo</span>
                </div>
                <div class="sport-details">
                    <div class="text-content">
                        <div class="timeline"><strong>October - February and May - August</strong></div>
                        <div class="age-group"><strong>2010s and younger</strong></div>
                        <div class="schedule"><strong>Wednesdays and Fridays 5:00 PM</strong></div>
                        <ul>
                            <li>Professional, licensed coaches</li>
                            <li>Led by experienced black belt instructors</li>
                            <li>Develops balance, coordination, and mental discipline</li>
                            <li>Used by top clubs like Ajax for youth training</li>
                            <li>Enhances physical and mental resilience</li>
                            <li>Builds confidence and self-defense skills</li>
                        </ul>
                        <div class="location"><strong>Location: <a href="https://www.google.com/maps/search/?api=1&query=5563+Western+Blvd,+Suite+12,+Raleigh,+NC+27606" target="_blank">Cary Judo Club</a></strong></div>
                    </div>
                    <div class="image-container">
                        <img src="images/CARYJUDOCLUB.png" alt="Judo">
                    </div>
                </div>
            </div>

            <!-- Flag Football -->
            <div class="sport-option">
                <div class="sport-header" onclick="document.getElementById('flag-football').click()">
                    <input type="checkbox" id="flag-football" name="programs" value="Flag Football">
                    <span class="sport-title">Flag Football</span>
                </div>
                <div class="sport-details">
                    <div class="text-content">
                        <div class="timeline"><strong>March - May and August - October</strong></div>
                        <div class="age-group"><strong>2014s and younger</strong></div>
                        <div class="schedule"><strong>Tuesdays and Saturdays</strong></div>
                        <ul>
                            <li>Non-contact skill development</li>
                            <li>Focus on agility and strategic thinking</li>
                            <li>Great for developing overall athleticism</li>
                            <li>Teaches field awareness and spatial recognition</li>
                            <li>Enhances creative thinking for set pieces in soccer</li>
                            <li>Fun way to cross-train</li>
                        </ul>
                        <div class="location"><strong>Location: <a href="https://goo.gl/maps/h2VgMBNPgP9RmvJR6" target="_blank">XL Sports World Apex</a></strong></div>
                    </div>
                    <div class="image-container">
                        <img src="images/XLSWAPEX.png" alt="Flag Football">
                    </div>
                </div>
            </div>

            <!-- Basketball -->
            <div class="sport-option">
                <div class="sport-header">
                    <input type="checkbox" name="sports" value="basketball" disabled>
                    <span class="sport-title">Basketball</span>
                </div>
                <div class="sport-details">
                    <p style="font-weight: bold; text-transform: uppercase;">COMING SOON</p>
                </div>
            </div>

            <!-- Tumbling Gymnastics -->
            <div class="sport-option">
                <div class="sport-header">
                    <input type="checkbox" name="sports" value="tumbling-gymnastics" disabled>
                    <span class="sport-title">Tumbling Gymnastics</span>
                </div>
                <div class="sport-details">
                    <p style="font-weight: bold; text-transform: uppercase;">COMING SOON</p>
                </div>
            </div>
        </div>

        <div class="navigation-buttons">
            <button id="back-to-type-selection">Go Back</button>
            <button id="next-step">NEXT</button>
        </div>
    </div>

    <!-- Personal information and day selection section -->
    <div class="program-content" id="personal-info" style="display: none;">
        <form id="player-info-form">
            <h3>Player Information</h3>
            
            <!-- Parent section -->
            <div class="form-row parent-section">
                <div class="form-group">
                    <label for="parent-first-name">Parent First Name:</label>
                    <input type="text" id="parent-first-name" name="parent-first-name" required>
                </div>
                <div class="form-group">
                    <label for="parent-last-name">Parent Last Name:</label>
                    <input type="text" id="parent-last-name" name="parent-last-name" required>
                </div>
                <button type="button" class="add-parent-button" title="Add Parent/Guardian">+</button>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="first-name">Player First Name:</label>
                    <input type="text" id="first-name" name="first-name" required>
                </div>
                <div class="form-group">
                    <label for="last-name">Player Last Name:</label>
                    <input type="text" id="last-name" name="last-name" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required 
                           pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                           title="Please enter a valid email address">
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" required
                           pattern="\(\d{3}\) \d{3}-\d{4}"
                           title="Phone number format: (XXX) XXX-XXXX"
                           placeholder="(XXX) XXX-XXXX">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="birth-year">Birth Year:</label>
                    <input type="number" id="birth-year" name="birth-year" required>
                </div>
            </div>

            <h3>Program Days</h3>
            <div id="program-days">
                <!-- Indoor Soccer (Required) -->
                <div class="program-schedule">
                    <h4>Indoor Soccer/Futsal</h4>
                    <p>Fixed Schedule: Tuesdays and Saturdays at XL Sports World Apex</p>
                </div>
                
                <!-- Outdoor Soccer (Required) -->
                <div class="program-schedule">
                    <h4>Outdoor Soccer</h4>
                    <p>Fixed Schedule: Fridays at Piney Wood Park</p>
                </div>
                
                <!-- Small Group Training -->
                <div class="program-schedule">
                    <h4>Small Group Training</h4>
                    <div class="location-selection">
                        <p>Select preferred locations:</p>
                        <div class="location-checkboxes">
                            <label><input type="checkbox" name="sgt-locations" value="hunter"> Hunter Street Park</label>
                            <label><input type="checkbox" name="sgt-locations" value="apex"> Apex Nature Park</label>
                            <label><input type="checkbox" name="sgt-locations" value="xlsw"> XL Sports World Apex</label>
                        </div>
                    </div>
                    <div class="day-selection">
                        <p>Select available days (minimum 2):</p>
                        <label><input type="checkbox" name="sgt-days" value="monday"> Monday</label>
                        <label><input type="checkbox" name="sgt-days" value="tuesday"> Tuesday</label>
                        <label><input type="checkbox" name="sgt-days" value="wednesday"> Wednesday</label>
                        <label><input type="checkbox" name="sgt-days" value="thursday"> Thursday</label>
                        <label><input type="checkbox" name="sgt-days" value="friday"> Friday</label>
                        <label><input type="checkbox" name="sgt-days" value="saturday"> Saturday</label>
                        <label><input type="checkbox" name="sgt-days" value="sunday"> Sunday</label>
                    </div>
                </div>
                
                <!-- Judo (if selected) -->
                <div class="program-schedule" id="judo-schedule" style="display: none;">
                    <h4>Judo</h4>
                    <p>Location: Cary Judo Club</p>
                    <div class="day-selection">
                        <p>Select preferred day:</p>
                        <label><input type="radio" name="judo-days" value="wednesday"> Wednesday 5:00 PM</label>
                        <label><input type="radio" name="judo-days" value="friday"> Friday 5:00 PM</label>
                    </div>
                </div>
                
                <!-- Flag Football (if selected) -->
                <div class="program-schedule" id="flag-football-schedule" style="display: none;">
                    <h4>Flag Football</h4>
                    <p>Location: XL Sports World Apex</p>
                    <div class="day-selection">
                        <p>Available days:</p>
                        <label><input type="checkbox" name="ff-days" value="tuesday" checked disabled> Tuesday</label>
                        <label><input type="checkbox" name="ff-days" value="saturday" checked disabled> Saturday</label>
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button type="button" id="back-to-selection" class="cta-button" style="display: none;">Go Back</button>
                <button type="button" id="back-to-program" class="cta-button" style="display: none;">Go Back</button>
                <button type="button" id="next-to-summary" class="cta-button">Next</button>
            </div>
        </form>
    </div>

    <!-- Add new summary section -->
    <div class="program-content" id="summary-section" style="display: none;">
        <h3>Program Summary</h3>
        <div id="summary-content">
            <div class="program-summary"></div>
            <div class="schedule-summary"></div>
            <div class="payment-options">
                <h4>Payment Options</h4>
                <select id="payment-plan-select">
                    <!-- Options will be populated based on program type -->
                </select>
                <p>Selected Amount: <span id="selected-fee">$0</span></p>
                
                <div class="payment-instructions">
                    <h4>Pay with Zelle</h4>
                    <div class="zelle-details">
                        <p>Send to: <strong>brett@apexraptors.com</strong></p>
                        <p id="zelle-amount">Amount: $0</p>
                        <button id="zelle-button" class="zelle-pay-button">
                            Pay with Zelle
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="navigation-buttons">
            <button type="button" id="back-to-form" class="cta-button">Go Back</button>
            <button type="submit" id="submit-final" class="cta-button">Submit</button>
        </div>
    </div>

    <!-- Example snippet for invite code input -->
    <form id="inviteForm">
        <input type="text" id="inviteCodeInput" placeholder="Enter Invite Code">
        <button type="submit">Submit</button>
    </form>

    <div id="playerInfo">
        <p>Name: <span id="playerName"></span></p>
        <p>Year: <span id="playerYear"></span></p>
        <p>Phone: <span id="playerPhone"></span></p>
        <p>Email: <span id="playerEmail"></span></p>
    </div>

    <!-- Add loading div -->
    <div id="loading" style="display: none; text-align: center; margin: 20px;"></div>

    <script>
        document.getElementById('btn-full-program').addEventListener('click', function() {
            document.getElementById('program-type-selection').style.display = 'none';
            document.getElementById('program-selection').style.display = 'block';
            scrollToTop();
        });

        document.getElementById('btn-small-group').addEventListener('click', function() {
            document.getElementById('program-type-selection').style.display = 'none';
            document.getElementById('personal-info').style.display = 'block';
            document.getElementById('back-to-selection').style.display = 'block';
            document.getElementById('back-to-program').style.display = 'none';
            document.querySelectorAll('.program-schedule').forEach(schedule => {
                schedule.style.display = 'none';
            });
            document.querySelector('.program-schedule:nth-child(3)').style.display = 'block';
            scrollToTop();
        });

        document.getElementById('build-program').addEventListener('click', function() {
            document.querySelector('.program-content').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        document.getElementById('next-step').addEventListener('click', function() {
            const selectedPrograms = document.querySelectorAll('#program-selection input[type="checkbox"]:checked:not([disabled])');
            if (selectedPrograms.length < 2) {
                alert('Please select at least two additional programs.');
                return;
            }
            document.getElementById('program-selection').style.display = 'none';
            document.getElementById('personal-info').style.display = 'block';
            document.getElementById('back-to-selection').style.display = 'none';
            document.getElementById('back-to-program').style.display = 'block';
            scrollToTop();
        });

        document.getElementById('back-to-type-selection').addEventListener('click', function() {
            document.getElementById('program-selection').style.display = 'none';
            document.getElementById('program-type-selection').style.display = 'block';
            scrollToTop();
        });

        document.getElementById('back-to-selection').addEventListener('click', function() {
            document.getElementById('personal-info').style.display = 'none';
            if (document.getElementById('program-selection').style.display === 'none') {
                document.getElementById('program-type-selection').style.display = 'block';
            } else {
                document.getElementById('program-selection').style.display = 'block';
            }
            scrollToTop();
        });

        document.getElementById('next-to-summary').addEventListener('click', function() {
            let isValid = true;
            let errorMessage = '';
            
            // Basic form validation
            ['parent-first-name', 'parent-last-name', 'first-name', 'last-name', 'email', 'phone', 'birth-year'].forEach(field => {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    errorMessage += `${field.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())} is required.\n`;
                    isValid = false;
                }
            });

            // Additional validation for email and phone
            const emailInput = document.getElementById('email');
            const phoneInput = document.getElementById('phone');
            
            if (!emailInput.validity.valid) {
                errorMessage += 'Please enter a valid email address.\n';
                isValid = false;
            }
            
            if (!phoneInput.validity.valid) {
                errorMessage += 'Please enter a valid phone number in format (XXX) XXX-XXXX.\n';
                isValid = false;
            }

            // Validate location and day selections
            const selectedLocations = document.querySelectorAll('input[name="sgt-locations"]:checked');
            const selectedDays = document.querySelectorAll('input[name="sgt-days"]:checked');
            
            if (selectedLocations.length === 0) {
                errorMessage += 'Please select at least one location for Small Group Training.\n';
                isValid = false;
            }
            
            if (selectedDays.length < 2) {
                errorMessage += 'Please select at least two available days for Small Group Training.\n';
                isValid = false;
            }

            if (!isValid) {
                alert(errorMessage);
                return;
            }

            document.getElementById('personal-info').style.display = 'none';
            document.getElementById('summary-section').style.display = 'block';
            generateSummary();
            scrollToTop();
        });

        document.getElementById('back-to-form').addEventListener('click', function() {
            scrollToTop();
            document.getElementById('summary-section').style.display = 'none';
            document.getElementById('personal-info').style.display = 'block';
        });

        document.getElementById('submit-final').addEventListener('click', function(e) {
            e.preventDefault();
            scrollToTop();
            const formData = new FormData(document.getElementById('player-info-form'));
            const paymentPlanText = document.getElementById('payment-plan-select').selectedOptions[0].textContent;
            const emailMessage = `
APEX ATHLETIC CLUB - NEW REGISTRATION

PLAYER INFORMATION
------------------
Name: ${formData.get('first-name')} ${formData.get('last-name')}
Birth Year: ${formData.get('birth-year')}

PARENT INFORMATION
------------------
Primary Parent: ${formData.get('parent-first-name')} ${formData.get('parent-last-name')}
Email: ${formData.get('email')}
Phone: ${formData.get('phone')}

PAYMENT INFORMATION
------------------
Payment Plan: ${paymentPlanText}
            `.replace(/^\s+/gm, '');
            emailjs.send("service_jqvfs2x", "template_3ls7ajq", {
                to_email: "brett@apexraptors.com",
                from_name: `${formData.get('first-name')} ${formData.get('last-name')}`,
                player_name: `${formData.get('first-name')} ${formData.get('last-name')}`,
                birth_year: formData.get('birth-year'),
                parent_name: `${formData.get('parent-first-name')} ${formData.get('parent-last-name')}`,
                email: formData.get('email'),
                phone: formData.get('phone'),
                message: emailMessage
            }).then(function(response) {
                return emailjs.send("service_jqvfs2x", "template_3ls7ajq", {
                    to_email: formData.get('email'),
                    from_name: "Apex Athletic Club",
                    player_name: `${formData.get('first-name')} ${formData.get('last-name')}`,
                    birth_year: formData.get('birth-year'),
                    parent_name: `${formData.get('parent-first-name')} ${formData.get('parent-last-name')}`,
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    message: `Thank you for registering with Apex Athletic Club!\n\n${emailMessage}`
                });
            }).then(
                function(response) {
                    alert("Registration submitted successfully! You will receive a confirmation email shortly.");
                    window.location.href = '/';
                },
                function(error) {
                    console.log("FAILED", error);
                    alert(`Error submitting registration: ${error.text}`);
                }
            );
        });

        function scrollToTop() {
            const whiteBackgroundElement = document.querySelector('.program-content:not([style*="display: none"])');
            if (whiteBackgroundElement) {
                whiteBackgroundElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        document.getElementById('inviteForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const inviteCode = document.getElementById('inviteCodeInput').value;
            if (inviteCode) {
                handleInviteCode(inviteCode);
            }
        });

        function handleInviteCode(code) {
            const validCodes = ['AHRIK2025', 'RAYYAN2025', 'ELLIOT2025', 'COOPER2025', 'LOGAN2025', 'KABIR2025'];
            const loadingDiv = document.getElementById('loading');
            loadingDiv.style.display = 'block';
            loadingDiv.textContent = 'Checking invite code...';
            setTimeout(() => {
                if (validCodes.includes(code)) {
                    loadingDiv.textContent = 'Valid invite code - redirecting...';
                    setTimeout(() => {
                        window.location.href = `program.html?inviteCode=${code}`;
                    }, 1000);
                } else {
                    loadingDiv.textContent = 'Invalid invite code';
                    setTimeout(() => {
                        loadingDiv.style.display = 'none';
                    }, 2000);
                }
            }, 1500);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const inviteCode = urlParams.get('inviteCode');
            if (inviteCode) {
                displayPlayerInfo(inviteCode);
            }
        });

        function displayPlayerInfo(code) {
            const playerInfo = {
                'AHRIK2025': { name: 'Ahrik Mathur', year: 2015, phone: '(718) 986-1869', email: 'smathurmd@gmail.com' },
                'RAYYAN2025': { name: 'Rayyan Shanti', year: 2015, phone: '(919) 840-8094', email: 'heba2000_b@hotmail.com' },
                'ELLIOT2025': { name: 'Elliot Haxell', year: 2016, phone: '(919) 622-5755', email: 'susanna.haxell@gmail.com' },
                'COOPER2025': { name: 'Cooper Young', year: 2017, phone: '(919) 624-1961', email: 'laurafranklin919@aol.com' },
                'LOGAN2025': { name: 'Logan Carey', year: 2016, phone: '(631) 291-0819', email: 'victoriamcarey@yahoo.com' },
                'KABIR2025': { name: 'Kabir Patel', year: 2015, phone: '(201) 993-3448', email: 'krpatel_in@yahoo.com' }
            };
            const info = playerInfo[code];
            if (info) {
                const [firstName, lastName] = info.name.split(' ');
                document.getElementById('first-name').value = firstName || '';
                document.getElementById('last-name').value = lastName || '';
                document.getElementById('birth-year').value = info.year || '';
                document.getElementById('email').value = info.email || '';
                document.getElementById('phone').value = info.phone || '';
                
                // Optionally show player info
                const playerInfoDiv = document.getElementById('playerInfo');
                playerInfoDiv.style.display = 'block';
                document.getElementById('playerName').textContent = info.name;
                document.getElementById('playerYear').textContent = info.year;
                document.getElementById('playerPhone').textContent = info.phone;
                document.getElementById('playerEmail').textContent = info.email;
            }
        }

        document.getElementById('judo').addEventListener('change', function() {
            const judoSchedule = document.getElementById('judo-schedule');
            judoSchedule.style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('flag-football').addEventListener('change', function() {
            const ffSchedule = document.getElementById('flag-football-schedule');
            ffSchedule.style.display = this.checked ? 'block' : 'none';
        });

        document.getElementById('back-to-program').addEventListener('click', function() {
            document.getElementById('personal-info').style.display = 'none';
            document.getElementById('program-selection').style.display = 'block';
            scrollToTop();
        });

        function generateSummary() {
            const programSummary = document.querySelector('.program-summary');
            const scheduleSummary = document.querySelector('.schedule-summary');
            const paymentSelect = document.getElementById('payment-plan-select');
            const isFullProgram = document.getElementById('judo-schedule').style.display !== 'none' || 
                                 document.getElementById('flag-football-schedule').style.display !== 'none' ||
                                 document.querySelectorAll('#program-selection input[type="checkbox"]:checked:not([disabled])').length > 0;
            
            // Clear existing options
            paymentSelect.innerHTML = '';
            programSummary.innerHTML = '<h4>Selected Programs</h4>';
            scheduleSummary.innerHTML = '<h4>Schedule Details</h4>';
            paymentSelect.innerHTML = '<option value="" disabled selected>Select Payment Plan</option>';
            
            if (isFullProgram) {
                // Add required programs
                programSummary.innerHTML += `
                    <p>Required Programs:</p>
                    <ul>
                        <li>Indoor Soccer/Futsal</li>
                        <li>Outdoor Soccer</li>
                        <li>Small Group Training</li>
                    </ul>
                    <p>Additional Programs:</p>
                    <ul>
                        ${document.getElementById('judo').checked ? '<li>Judo</li>' : ''}
                        ${document.getElementById('flag-football').checked ? '<li>Flag Football</li>' : ''}
                    </ul>
                `;
                
                // Add payment options for full program
                paymentSelect.innerHTML += `
                    <option value="12-full">12 Month Payment - $2,100</option>
                    <option value="6-full">6 Month Payment - $1,100</option>
                    <option value="month-full">Monthly Payment - $200</option>
                `;
            } else {
                programSummary.innerHTML += `
                    <p>Selected Program:</p>
                    <ul>
                        <li>Small Group Training Only</li>
                    </ul>
                `;
                
                // Add payment option for small group only
                paymentSelect.innerHTML += `
                    <option value="12-sgt">12 Month Payment - $1,000</option>
                    <option value="6-sgt">6 Month Payment - $550</option>
                    <option value="month-sgt">Monthly Payment - $100</option>
                `;
            }
            
            // Add schedule details
            const selectedLocations = Array.from(document.querySelectorAll('input[name="sgt-locations"]:checked'))
                .map(input => input.parentElement.textContent.trim());
            
            const selectedDays = Array.from(document.querySelectorAll('input[name="sgt-days"]:checked'))
                .map(input => input.parentElement.textContent.trim());
            
            scheduleSummary.innerHTML += `
                <p>Small Group Training:</p>
                <ul>
                    <li>Locations: ${selectedLocations.join(', ')}</li>
                    <li>Available Days: ${selectedDays.join(', ')}</li>
                </ul>
            `;
            
            if (document.getElementById('judo-schedule').style.display !== 'none') {
                const judoDay = document.querySelector('input[name="judo-days"]:checked');
                if (judoDay) {
                    scheduleSummary.innerHTML += `
                        <p>Judo:</p>
                        <ul>
                            <li>Location: Cary Judo Club</li>
                            <li>Preferred Day: ${judoDay.parentElement.textContent.trim()}</li>
                        </ul>
                    `;
                }
            }
        }

        document.getElementById('payment-plan-select').addEventListener('change', function() {
            const zelleAmount = document.getElementById('zelle-amount');
            const selectedFee = document.getElementById('selected-fee');
            let amount = '';
            
            switch(this.value) {
                case '12-full': amount = '2100'; break;
                case '6-full': amount = '1100'; break;
                case 'month-full': amount = '200'; break;
                case '12-sgt': amount = '1000'; break;
                case '6-sgt': amount = '550'; break;
                case 'month-sgt': amount = '100'; break;
            }
            
            selectedFee.textContent = `$${amount}`;
            zelleAmount.textContent = `Amount: $${amount}`;
        });

        let parentCount = 1;
        
        document.querySelector('.add-parent-button').addEventListener('click', function() {
            parentCount++;
            const newParentSection = document.createElement('div');
            newParentSection.className = 'form-row parent-section';
            newParentSection.innerHTML = `
                <div class="form-group">
                    <label for="parent-first-name-${parentCount}">Parent First Name:</label>
                    <input type="text" id="parent-first-name-${parentCount}" name="parent-first-name-${parentCount}" required>
                </div>
                <div class="form-group">
                    <label for="parent-last-name-${parentCount}">Parent Last Name:</label>
                    <input type="text" id="parent-last-name-${parentCount}" name="parent-last-name-${parentCount}" required>
                </div>
                <button type="button" class="remove-parent-button" title="Remove Parent/Guardian">-</button>
            `;
            
            // Insert new parent section after the last parent section
            const parentSections = document.querySelectorAll('.parent-section');
            const lastParentSection = parentSections[parentSections.length - 1];
            lastParentSection.insertAdjacentElement('afterend', newParentSection);
            
            // Add remove button functionality
            newParentSection.querySelector('.remove-parent-button').addEventListener('click', function() {
                newParentSection.remove();
            });
        });

        document.getElementById('zelle-button').addEventListener('click', function() {
            const amount = document.getElementById('zelle-amount').textContent.split('$')[1];
            if (!amount || amount === '0') {
                alert('Please select a payment plan first');
                return;
            }
            window.location.href = `https://enroll.zellepay.com/qr-codes?data={"token":"brett@apexraptors.com","amount":"${amount}"}`;
        });

        // Add phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
            e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');
        });

        document.addEventListener("DOMContentLoaded", function() {
            // Initialize Vanta background
            VANTA.CELLS({
                el: "#vanta-bg",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                scale: 1.00,
                color1: 0x045034,
                color2: 0x109963,
                size: 0.20,
                speed: 0.00
            });

            // Hide unnecessary elements
            const inviteForm = document.getElementById('inviteForm');
            const playerInfo = document.getElementById('playerInfo');
            if (inviteForm) inviteForm.style.display = 'none';
            if (playerInfo) playerInfo.style.display = 'none';
        });
    </script>
</body>
</html> 